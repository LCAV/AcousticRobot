<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<base href="http://lcav.github.io/AcousticRobot/">
<title>Acousticrobot by LCAV</title>

<link rel="stylesheet" href="stylesheets/styles.css">
<link rel="stylesheet" href="stylesheets/github-dark.css">
<script src="javascripts/scale.fix.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
<div class="wrapper">
<header>
<p>Routines to control a humanoid echolocator robot.</p>
<h4>Semester Project by Frederike DÃ¼mbgen</h4>
<ul>
<li><a href="https://github.com/LCAV/AcousticRobot/zipball/master">Download <strong>ZIP File</strong></a></li>
<li><a href="https://github.com/LCAV/AcousticRobot/tarball/master">Download <strong>TAR Ball</strong></a></li>
<li><a href="https://github.com/LCAV/AcousticRobot" target="_blank">View On <strong>GitHub</strong></a></li>
</ul>
</header>
<section>
<overview> 
<ul>
  
<li><a href="index.html"><strong> Home </strong></a></li> 
<li><a href="pages/preparation.html"><strong> Prepare </strong></a></li> 
<li><a href="pages/setup.html"><strong> Setup </strong></a></li> 
<li><a href="pages/operate.html"><strong> Operate </strong></a></li> 
<li><a href="pages/analyze.html"><strong> Analyze </strong></a></li> 
<li><a href="pages/develop.html"><strong> Develop </strong></a></li> 
</ul>     
</overview> 
<h1><a id="acoustic-robot" class="anchor" href="index.html" aria-hidden="true"><span class="octicon octicon-link"></span></a>Acoustic Robot</h1>
<h2> Develop </h2>
<p>
This site contains some information on how the hardware used in this framework can be coded and improved. It also contains the link to the Doxygen site and instructions for developing this webpage.
</p>
<h3> Robot </h3>

<p> For a better functioning of the robot, changements can be made in the source code of the server. 
For example, A line was added to the function stop_drive_motors() so that when the robot is at rest, its motors are shut down. 
Without doing so, the motors sometimes entered some unstable state where they were making a loud noise after receiving the command to stop.
The resulting function was then:<br> 

<iframe src="other/new_function.txt" width=500px>
<caption> Customized stop_drive_motors() function on robot's server </caption>
</iframe>
<br>
The instructions for how to recompilse the code can be found in the Manufacturer's documentation. 
</p>

<h3> Cameras </h3>
<h4> How to create backup of SD Card (Mac) </h4>

<p>Insert the SD card into your computer and open a Terminal. 
Find out the number of the inserted disk by typing </p>
<code>diskutil list</code>

<p> In the following, the SD card is assumed to have number 2. 
Unmount the SD card by typing <code>diskutil unmountdisk /dev/disk2</code>. 
Now you may copy the image to your desired location by typing: <br>
<code>sudo dd if=/dev/rdisk2 bs=2m ~/Desktop/backups/backup_robot.img</code><br>
or, directly zipping the file:<br>
<code>sudo dd if=/dev/rdisk2 bs=2m | gzip > ~/Desktop/backups/backup_robot.gz</code><br>
When the backup is needed, it can be unzipped by entering <br>
<code> sudo dd if=~/Desktop/backups/backup_robot.gz bs=2m | gunzip > ~/Desktop/backups/backup_robot.img </code>. <br>
Once the image is unzipped, the card where the backups is to be copied to can be
inserted and unmounted as described above and then the image can be copied onto it using <br>
<code> sudo dd if=~/Desktop/backups/backup_robot.img of=/dev/rdisk2 bs=2m </code> <br>
</p>
<h4> Webcam setup </h4>
You can find the hardware parameters of the cameras
<a href="http://elinux.org/Rpi_Camera_Module"target="_blank">here</a>.

The camera is implemented to send images to a local network using the mjpg streamer. The two codes that have been added onto the camera are ~/start_camera.sh for starting raspistill with the mjpg streamer and ~/switchoff.py for starting the interrupt for turning the camera on via an externally mounted button. They can be find in the folder Cameras/ in in the Documentation. 
Also, the IP number in /etc/network/interfaces need to be set and finally, a few lines need to be added in /etc/rc.local:<br>
<code>
    #Auto start camera<br>
    sudo /home/pi/start_camera.sh &<br>
    #Auto start shutdowni<br>
    sudo python /home/pi/switchoff.py &<br>
</code>
</p>

<h3> Program </h3>

<p> The program has been documented using <a href="http://www.stack.nl/~dimitri/doxygen/" target="_blank">Doxygen</a> and a filter 
for formatting python code <a href="https://pypi.python.org/pypi/doxypy/0.3" target="_blank">doxypy</a>.

<p><a href="doxygen/html/index.html" target="_blank">View Code with Doxygen</a></p>

<p>
Note that there are some debug options for the code, there is more information if you type 'h' as command line argument.
</p>


<h3> Page </h3>
<p> Run ./template.sh for automatically adding template to all *.html files in home folder. 
The completed files will be copied to pages/. 
Don't edit the files in the pages/ folder, always edit files in home folder and run ./template.sh before commiting.
</p>

</section>
</div>

<footer>
<p>Project maintained by <a href="https://github.com/LCAV">LCAV</a></p>
<p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
</footer>

<!--[if !IE]><script>fixScale(document);</script><![endif]-->
</body>
</html>
